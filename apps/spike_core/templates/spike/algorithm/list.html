{% extends "spike/algorithm/base.html" %}

{% load i18n %}
{% load bootstrap_tags %}
{% load pagination_tags %}
{% load sorting_tags %}
{% load spike_eval_tags %}
{% load taggit_extras %}

{% block head_title %}{% trans "Algorithms" %}{% endblock %}

{% block content %}

  {% if user.is_authenticated %}
    <section class="well">
      <form class="actions">
        <span class="label">Actions:</span>
        <a class="btn btn-mini"
           onclick="$('#create-algorithm').toggle();">Create Algorithm</a>
        <a class="btn btn-mini"
           onclick="$('#tagcloud').toggle();">Show Tagcloud</a>
      </form>
      <form id="create-algorithm" class="form form-horizontal" method="POST"
            {% if not al_form.errors %}style="display:none"{% endif %}>
        <fieldset>
          <legend>Create Algorithm</legend>
          {% csrf_token %}
          {{ al_form|as_bootstrap }}
          <div class="form-actions">
            <input type="submit" class="btn btn-primary"
                   value="{% trans 'Create Algorithm' %}"/>
          </div>
        </fieldset>
      </form>
    </section>
  {% endif %}

  <section id="tagcloud" style="display: none;">
    <h2>Algorithm Tagcloud
      <small>visualisation of the Algorithm tag space</small>
    </h2>
    <div class="well">
      {% include_tagcloud 'evaluation.Algorithm' %}
    </div>
  </section>

  {% if al_list %}
    <section>
      <h2>Algorithm List
        <small>all Algorithms are listed here</small>
      </h2>
      {% autosort al_list %}
      {% autopaginate al_list 20 %}
      <table class="table table-striped table-condensed">
        <thead>
        <tr>
          <th>{% trans "Algorithm" %}</th>
          <th>{% trans "Version" %}</th>
          <th>{% trans "Owner" %}</th>
          <th>{% trans "Date" %}</th>
        </tr>
        </thead>
        <tbody>
        {% for al in al_list %}
          <tr>
            <td>
              <a href="{{ al.get_absolute_url }}">{{ al.name }}</a>
            </td>
            <td>
              {{ al.version }}
            </td>
            <td>
              {% icn_profile al %}
            </td>
            <td>
              {% icn_time al %}
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
      {% paginate %}
    </section>
  {% endif %}
{% endblock %}
