{% extends "spike_eval/evaluation/base.html" %}

{% load i18n %}
{% load pagination_tags %}
{% load sorting_tags %}
{% load spike_eval_tags %}

{% block head_title %}{% trans "Evaluations" %}{% endblock %}

{% block content %}

  <p>You may select a Benchmark and download files for your algorithm
    evaluation <a href="{% url b_list %}">here</a>.</p>

  {% if not e_list %}
    <p>There are no public Evaluations available.</p>
  {% else %}

    <form class="form" method="GET">
      <div class="control-group">
        <div class="controls left">
          <div class="input-prepend input-append">
            <span class="add-on"><i class="icon-search"></i></i></span>
            <input type="text" name="search" value="{{ search_terms }}"
             class="input-medium search-query"/>
            <input class="btn" type="submit" value="Search"/>
            {% if search_terms %}
              <a class="btn" href="{% clear_search_url request %}">Clear</a>
            {% endif %}
          </div>
        </div>
        <div class="controls right">
          <i class="icon-filter"></i>
          {% anchor algorithm__name Algorithm %}
          {% anchor added_by__username Author %}
          {% anchor benchmark__name Benchmark %}
          {% anchor date_created Date %}
        </div>
      </div>
    </form>

    <table class="table table-striped table-condensed">
      <thead>
      <tr>
        <th>{% trans "ID, Algorithm" %}</th>
        <th>{% trans "Author" %}</th>
        <th>{% trans "Date" %}</th>
        <th>{% trans "Benchmark" %}</th>
        <th>{% trans "Description" %}</th>
        <th>{% trans "Access" %}</th>
      </tr>
      </thead>
      <tbody>
      {% for e in e_list %}
        <tr>
          <td>
            <a href="{{ e.get_absolute_url }}">
              <b style="{% zero_red e.access %}">
                #{{ e.id }}, {{ e.algorithm }}
              </b>
            </a>
          </td>
          <td>
            <nobr>
              <i class="icon-user"></i>
              <a href="{% url profile_detail e.added_by %}"
               title="{{ e.added_by }}">{{ e.added_by }}</a>
            </nobr>
          </td>
          <td>
            <nobr><i class="icon-time"></i>{{ e.date_created|date }}</nobr>
          </td>
          <td>
            <a href="{{ e.benchmark.get_absolute_url }}">
              {{ e.benchmark.name }}</a>
          </td>
          <td>
            {% if e.description %}
              <nobr>{{ e.description|truncate:100|escape }}</nobr>
            {% endif %}
          </td>
          <td>
            <b style="{% state_color e.access %}">
              {{ e.get_access_display }}</b>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    {% paginate %}
  {% endif %}
{% endblock %}
