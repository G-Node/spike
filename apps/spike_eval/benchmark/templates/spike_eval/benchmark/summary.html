{% extends "spike_eval/benchmark/base.html" %}

{% load i18n %}
{% load uni_form %}
{% load humanize %}
{% load pagination_tags %}
{% load order_by %}
{% load extra_tagging_tags %}
{% load sorting_tags %}
{% load truncate_filter %}

{% block head_title %}
  {% blocktrans %}Benchmark Summary{% endblocktrans %}{% endblock %}

{% block body %}
  <h1>{% trans "Benchmark Summary" %}</h1>

  {% if not user.is_authenticated %}
    {% url acct_signup as signup_url %}
    {% url acct_login as login_url %}
    <p>{% blocktrans %}<a href="{{ signup_url }}">Sign up</a> and
      <a href="{{ login_url }}">log in </a> to create your own benchmark or
      submit an evaluation for an existing one. {% endblocktrans %}</p>
  {% else %}
    <p>Summary for the <b>{{ b }}</b> Benchmark.</p>
  {% endif %}

  {% if not e_list %}
    <p>There are no evaluations available yet to summarise.</p>
  {% else %}
    {% autosort e_list %}
    <table class="messages">
      <thead>
      <tr>
        <th>{% trans "Record" %}</th>
        <th>{% trans "Algorithm" %}</th>
        <th>{% trans "Summary [FP, FN]" %}</th>
      </tr>
      </thead>
      <tbody>
      {% for e in e_list %}
        {% with e.owner.username as uname %}
          <tr>
            <td>
              <b {% if not e.is_public %}style="color: red"{% endif %}>
                {{ e.record }}</b>
            </td>
            <td>
              <a href="{{ e.get_absolute_url }}">
                <b {% if not e.is_public %}style="color: red"{% endif %}>
                  {{ e.algorithm }}</b>
              </a>
            </td>
            <td>
              {% with e.summary_table as e_sum %}
                FN: {{ e_sum.FN }}
                &nbsp;-&nbsp;
                FP: {{ e_sum.FP }}
                &nbsp;-&nbsp;
                FPA: {{ e_sum.FPAE }}
                &nbsp;-&nbsp;
                Sum: {{ e_sum.error_sum }}
              {% endwith %}
            </td>
          </tr>
        {% endwith %}
      {% endfor %}
      </tbody>
    </table>
    <img src="{% url b_summary_plot b.id %}" alt="Summary Plot" border="1px"/>
  {% endif %}
{% endblock %}
