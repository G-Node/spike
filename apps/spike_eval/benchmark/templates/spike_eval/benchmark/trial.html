{% extends "spike_eval/benchmark/base.html" %}

{% load i18n %}
{% load spike_eval_tags %}
{% load bootstrap_tags %}

{% block head_title %}{T:{{ t.id }}}&nbsp;{{ t.name }}{% endblock %}

{% block content %}
  <section>
    <h3>
      &quot;{{ t.benchmark.name }}&quot;&nbsp;-&nbsp;&quot;{{ t.name }}&quot;
    </h3>
    <dl class="dl-horizontal">
      <dt>
        <strong>Benchmark:</strong>
      </dt>
      <dd>
        <a href="{% url b_detail bid=t.benchmark.id %}">
          {{ t.benchmark.name }}</a>
      </dd>
      <dt>
        <strong>Description:</strong>
      </dt>
      <dd>
        {{ t.description|default:"no description" }}
      </dd>
      <dt>
        <strong>{{ t.benchmark.parameter }}:</strong>
      </dt>
      <dd>
        {{ t.parameter }}
      </dd>
      <dt>
        <strong>Date Created:</strong>
      </dt>
      <dd>
        {% icn_time t %}
      </dd>
      <dt>
        <strong>Status:</strong>
      </dt>
      <dd>
        {% if t.is_validated %}
          <i class="icon-ok"></i>
          <strong style="color: green">VALID</strong>
        {% else %}
          <i class="icon-exclamation-sign"></i>
          <strong style="color: red">INVALID</strong>
        {% endif %}
      </dd>
    </dl>
    <form class="form well" method="POST">
      <span class="label">Actions:</span>
      {% csrf_token %}
      <a id="edit-trial-toggle"
       class="btn btn-mini">{% trans "Edit Trial" %}</a>
      <input type="submit" class="btn btn-mini" name="t_delete"
       value="{% trans "Delete Trial" %}"/>
      <input type="submit" class="btn btn-mini" name="t_validate"
       value="{% trans "Validate Trial" %}"/>
    </form>
    <form id="edit-trial" class="form form-horizontal well" method="POST"
     enctype="multipart/form-data" style="display:none">
      <fieldset>
        <legend>Edit Trial</legend>
        {% csrf_token %}
        {{ t_form|as_bootstrap }}
        <div class="form-actions">
          <input type="submit" class="btn btn-primary" name="t_edit"
           value="{% trans 'Edit Trial' %}"/>
        </div>
      </fieldset>
    </form>
  </section>

  <section>
    <h3>Validation Logs
      <small>separate logs of the validation of each file</small>
    </h3>

    <strong>{% trans "Rawdata File" %}</strong>
    {% if t.rd_file %}
      <pre>{{ t.rd_file.task_log|default:"no log!" }}</pre>
    {% else %}
      <pre>no rd_file!</pre>
    {% endif %}
    <strong>{% trans "Groundtruth File" %}</strong>
    {% if t.gt_file %}
      <pre>{{ t.gt_file.task_log|default:"no log!" }}</pre>
    {% else %}
      <pre>no gt_file!</pre>
    {% endif %}
  </section>
{% endblock %}

{% block extra_body %}
  <script type="text/javascript">
    $(document).ready(function() {
      $('#edit-trial-toggle').click(function() {
        $('#edit-trial').toggle();
        return false;
      });
      if($('#edit-trial .error').length) {
        $('#edit-trial').show();
        $('#edit-trial .error').autoscroll();
      }
      ;
    });
  </script>
{% endblock %}
